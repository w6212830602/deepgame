/* Fonts  */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap");

/* Reset */
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  color: var(--text);
  background: radial-gradient(1200px 600px at 10% -10%, #2b2a5a 0%, transparent 60%),
              radial-gradient(1000px 500px at 90% -20%, #432a6b 0%, transparent 60%),
              linear-gradient(180deg, #0b132b 0%, #0b1224 60%, #0a0f1c 100%);
}

/* Theme*/
:root{
  --text: #E6ECF3;
  --muted: #9FB0C5;
  --card: rgba(255,255,255,0.06);
  --card-border: rgba(255,255,255,0.14);
  --accent: #7C5CFF;        
  --accent-2: #30E0A1;      
  --danger: #ff5a8a;
  --shadow: 0 10px 30px rgba(0,0,0,0.45);
  --glass: blur(10px) saturate(120%);
}

/* Starfield background */
.starfield {
  position: fixed; inset: 0; pointer-events: none; z-index: 0;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.7) 40%, transparent 42%),
    radial-gradient(2px 2px at 80% 20%, rgba(255,255,255,0.6) 40%, transparent 42%),
    radial-gradient(1.5px 1.5px at 60% 70%, rgba(255,255,255,0.5) 40%, transparent 42%),
    radial-gradient(1.5px 1.5px at 30% 60%, rgba(255,255,255,0.45) 40%, transparent 42%);
  animation: twinkle 6s infinite linear;
}
@keyframes twinkle {
  0%,100% { opacity: .5; }
  50% { opacity: .8; }
}

/* Layout helpers */
.container {
  position: relative; z-index: 1;
  max-width: 1100px; margin: 0 auto; padding: 48px 20px 80px;
}
.section { margin-top: 28px; }

/* Card */
.card {
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 18px;
  box-shadow: var(--shadow);
  -webkit-backdrop-filter: var(--glass);
  backdrop-filter: var(--glass);
  transition: transform .25s ease, border-color .25s ease, box-shadow .25s ease;
}
.card:hover {
  transform: translateY(-4px);
  border-color: rgba(255,255,255,0.28);
  box-shadow: 0 16px 40px rgba(0,0,0,0.55);
}

/* Buttons */
.button {
  appearance: none; border: 0; cursor: pointer;
  padding: 10px 14px; border-radius: 12px; font-weight: 700;
  color: #0b0f1a; background: linear-gradient(135deg, var(--accent) 0%, #9c7dff 50%, var(--accent-2) 100%);
  box-shadow: 0 8px 20px rgba(124,92,255,0.35);
  transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
}
.button:hover { transform: translateY(-2px); filter: brightness(1.05); }
.button:active { transform: translateY(0); }
.button--ghost {
  background: transparent; color: var(--text); border: 1px solid var(--card-border);
  box-shadow: none;
}
.button--danger {
  background: linear-gradient(135deg, #ff5a8a 0%, #ff7aa5 100%);
  box-shadow: 0 8px 20px rgba(255,90,138,0.35);
}

/* Typography */
.h1 {
  font-size: clamp(28px, 4vw, 44px);
  font-weight: 800; letter-spacing: .4px; margin: 0 0 6px 0;
}
.subtle { color: var(--muted); font-weight: 500; }

/* Grid */
.grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 18px;
}

/* Scenario card  */
.sc-card { display: flex; flex-direction: column; overflow: hidden; }
.sc-cover {
  height: 120px;
  background:
    radial-gradient(200px 200px at 0% 0%, rgba(124,92,255,.5), transparent 60%),
    radial-gradient(200px 200px at 100% 100%, rgba(48,224,161,.4), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0));
}
.sc-body { padding: 16px; display: flex; flex: 1; flex-direction: column; gap: 10px; }
.sc-title { font-weight: 700; font-size: 18px; }
.sc-desc { color: var(--muted); line-height: 1.45; font-size: 14px; }

/*Panels */
.panel {
  padding: 18px; border-radius: 16px; border: 1px solid var(--card-border);
  background: var(--card); backdrop-filter: var(--glass);
}

/* Story layout  */
.story-header { display: flex; align-items: center; gap: 10px; margin-bottom: 14px; }
.story-title { font-weight: 700; font-size: 22px; }
.story-actions { margin-left: auto; display: flex; gap: 10px; }

.log {
  height: min(52vh, 520px);
  overflow: auto;
  padding: 14px;
  border-radius: 12px;
  background: rgba(0,0,0,0.25);
  border: 1px dashed rgba(255,255,255,0.18);
}
.log p { margin: 0 0 10px 0; color: #DDE5EE; }

/* Pretty Buttons & Chips  */
:root{
  --text:#E6ECF3;--muted:#9FB0C5;--card:rgba(255,255,255,.06);
  --card-border:rgba(255,255,255,.14);--accent:#7C5CFF;--accent2:#30E0A1;
}

/* reset for buttons */
button{font:inherit}

/* base button */
.btn{
  appearance:none; border:0; cursor:pointer; user-select:none;
  padding:.6rem .95rem; border-radius:14px; font-weight:700;
  color:#0b0f1a; background:linear-gradient(135deg,var(--accent) 0%,#9c7dff 50%,var(--accent2) 100%);
  box-shadow:0 10px 22px rgba(124,92,255,.35);
  transition:transform .18s ease, filter .18s ease, box-shadow .18s ease, opacity .18s ease;
}
.btn:hover{ transform:translateY(-2px); filter:brightness(1.06) }
.btn:active{ transform:translateY(0) }
.btn[disabled]{ opacity:.6; cursor:not-allowed }

/* sizes */
.btn-sm{ padding:.45rem .7rem; border-radius:12px; font-weight:600 }
.btn-lg{ padding:.75rem 1.1rem; border-radius:16px; font-size:1rem }

/* ghost (secondary) */
.btn-ghost{
  background:transparent; color:var(--text);
  border:1px solid var(--card-border); box-shadow:none;
  backdrop-filter:blur(10px) saturate(120%);
}
.btn-ghost:hover{ background:rgba(255,255,255,.08) }

/* subtle (neutral dark) */
.btn-dark{
  color:var(--text); background:rgba(255,255,255,.08);
  border:1px solid var(--card-border); box-shadow:0 6px 16px rgba(0,0,0,.35);
}
.btn-dark:hover{ background:rgba(255,255,255,.12) }

/* option chip (full width) */
.option{
  display:flex; align-items:center; gap:.6rem; width:100%;
  text-align:left; color:var(--text);
  background:rgba(18,23,37,.7); border:1px solid var(--card-border);
  padding:.75rem .9rem; border-radius:14px;
  transition:background .18s ease, transform .18s ease, border-color .18s ease;
  box-shadow:0 6px 18px rgba(0,0,0,.35);
  backdrop-filter:blur(10px) saturate(120%);
}
.option:hover{ background:rgba(255,255,255,.08); transform:translateY(-1px); border-color:rgba(255,255,255,.22) }
.option[disabled]{ opacity:.6; cursor:not-allowed }
.option .num{
  width:28px; height:28px; display:grid; place-items:center;
  border-radius:999px; background:rgba(255,255,255,.12); color:var(--text);
  font-weight:800; font-size:.85rem;
}

/* back button small */
.btn-back{ padding:.35rem .6rem; border-radius:10px; }

/* tidy paragraphs inside story log */
.story-log p{ margin:.6rem 0; line-height:1.7; color:#E6ECF3 }
.story-log strong{ color:#fff }


/* === Chat Input (dock) === */
.chat-input-wrap{
  position:relative; display:flex; align-items:flex-end; gap:.6rem;
  background:rgba(0,0,0,.28); border:1px solid rgba(255,255,255,.14);
  border-radius:16px; padding:.55rem .6rem .55rem .6rem;
  box-shadow:0 12px 28px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
  backdrop-filter: blur(10px) saturate(120%);
}
.chat-chip{
  flex:0 0 auto;
  display:inline-flex; align-items:center; justify-content:center;
  min-width:44px; height:32px; padding:0 .6rem;
  border-radius:10px; font-weight:700; color:#E6ECF3;
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.14);
}
.chat-input{
  flex:1 1 auto; min-height:42px; max-height:160px;
  padding:.6rem .8rem; border-radius:12px; border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.06); color:#E6ECF3;
  outline:none; resize:none; overflow:auto; line-height:1.5;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
}
.chat-input::placeholder{ color:rgba(230,236,243,.55) }
.chat-input:focus{
  border-color:rgba(124,92,255,.55);
  box-shadow: 0 0 0 3px rgba(124,92,255,.25), inset 0 1px 0 rgba(255,255,255,.06);
}
.chat-send{
  flex:0 0 auto;
}

.chat-input::-webkit-scrollbar{ width:10px }
.chat-input::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,.18); border-radius:12px; border:2px solid transparent; background-clip:padding-box;
}

/* ---- Prettier fields for Custom Scenario Modal ---- */
.ui-input, .ui-textarea{
  width:100%;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  color:#E6ECF3;
  padding:.6rem .8rem;
  font-size:.95rem;
  outline:none;
  transition:.18s ease;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
}
.ui-textarea{ resize:none; min-height:3rem }
.ui-input::placeholder, .ui-textarea::placeholder{ color:rgba(230,236,243,.55) }
.ui-input:focus, .ui-textarea:focus{
  border-color:rgba(124,92,255,.55);
  background:rgba(255,255,255,.10);
  box-shadow:0 0 0 3px rgba(124,92,255,.25), inset 0 1px 0 rgba(255,255,255,.06);
}
